import{useState,useEffect}from"react";import toast,{Toaster}from"react-hot-toast";const KEY="4a287b95";export function useMovies(query){const[movies,setMovies]=useState([]),[isLoading,setIsLoading]=useState(!1),[error,setError]=useState("");return useEffect((function(){const controller=new AbortController;async function fecthMovies(){try{setIsLoading(!0),setError("");const res=await fetch(`http://www.omdbapi.com/?apikey=${KEY}&s=${query}`,{signal:controller.signal}),data=await res.json();if(!res.ok)throw new Error("Something went wrong with fetching movies");if("False"===data.Response)throw new Error("Movie not found");setMovies(data.Search),setError("")}catch(error){"AbortError"!==error.name&&(setError(error.message),toast.error(error.message))}finally{setIsLoading(!1)}}return query.length<3?(setMovies([]),void setError("")):(fecthMovies(),function(){controller.abort()})}),[query]),{movies:movies,isLoading:isLoading,error:error}}